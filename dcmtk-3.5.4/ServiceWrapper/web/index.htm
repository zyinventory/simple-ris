<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=gbk" />
	<!-- meta http-equiv="refresh" content="10" / -->
	<title>PACS</title>
	<link rel="stylesheet" type="text/css" href="styles/smoothness/jquery-ui-1.9.1.custom.css" />
	<style type="text/css">
		#containerBody table	{ border-style:solid; border-width:1px; border-color:black; border-collapse:collapse; margin:0px; width:100%; }
		#containerBody thead	{ background-color:#aaa; }
		#containerBody th		{ border-style:solid; border-width:1px; }
		#containerBody td		{ border-style:solid; border-width:1px; }
		#containerBody tr:nth-child(even)	{ background-color:#ccc; }
		.highlight	{ background-color:yellow; }
	</style>
	<script type="text/javascript" src="scripts/jquery-1.8.2.min.js"></script>
	<script type="text/javascript" src="scripts/jquery-ui-1.9.1.custom.min.js"></script>
	<script type="text/javascript" src="scripts/jquery.ui.datepicker-zh-CN.js"></script>
	<script type="text/javascript" src="scripts/charhash.js"></script>
	<script type="text/javascript">
	//<![CDATA[
	    jQuery(document).ready(function () {
	        $.ajaxSetup({ async: false, cache: false });
	        var result = $.get('xslt/dayrec.xsl', {}, function (body, txt, ref) { xslDoc = body; }, 'xml');
	        if (result.status != 200) {
	            alertMessage('Load XSLT dayrec failed: ' + result.statusText);
	        }
	        result = $.get('xslt/receive.xsl', {}, function (body, txt, ref) { xslDoc2 = body; }, 'xml');
	        if (result.status != 200) {
	            alertMessage('Load XSLT receive failed: ' + result.statusText);
	        }

	        var today = $.datepicker.formatDate('yy/mm/dd', new Date());
	        picker = $('#datepicker');
	        picker.attr('readonly', true);
	        picker.val(today);
	        picker.datepicker({
	            changeMonth: true,
	            changeYear: true,
	            selectOtherMonths: true,
	            showButtonPanel: true,
	            showOtherMonths: true,
	            dateFormat: 'yy/mm/dd',
	            defaultDate: today,
	            onSelect: displayContent
	        });

	        if (mode == 'receive' || mode == '00080020') {
	            displayContent(today);
	        }
	        else {
	            var patientId = getQueryString('patientID');
	            displayPaitent(toHashPath(patientId) + '/' + patientId);
	        }

	        switch (mode) {
	            case 'receive':
	                $('div#containerHeader > label#dateDesc').text('传输日期:');
	                $('div#containerHeader > a#receive').css('display', 'none');
	                $('div#containerHeader > a#00100020').css('display', 'none');
	                break;
	            case '00080020':
	                $('div#containerHeader > label#dateDesc').text('检查日期:');
	                $('div#containerHeader > a#00080020').css('display', 'none');
	                $('div#containerHeader > a#00100020').css('display', 'none');
	                break;
	            case '00100020':
	                $('div#containerHeader > label#dateDesc').css('display', 'none');
	                $('div#containerHeader > input#datepicker').css('display', 'none');
	                $('div#containerHeader > a#00100020').attr('href', 'cgi-bin/getindex.exe?jnlp=1&patientID=' + getQueryString('patientID'));
	                break;
	            default:
	                break;
	        }
	    });
	//]]>
	</script>
</head>
<body>
<!--
<table style="width:100%"><tbody><tr>
	<td><img alt="logo" src="logo.png" /></td>
	<td style="font-size:large; vertical-align:bottom; text-align:right;">北京胡桃计算机技术有限公司</td>
</tr></tbody></table>
-->
<div id="containerPane" class="ui-widget ui-widget-content ui-widget-helper-clearfix">
	<div id="containerHeader" class="ui-widget-header ui-widget-helper-clearfix">
		<label id="dateDesc" for="datepicker">传输日期:</label><input type="text" id="datepicker" style="width:6.5em" />
		&nbsp;<a id="receive" href="index.htm">传输日志</a>
		&nbsp;<a id="00080020" href="index.htm?mode=00080020">检查日期归档</a>
        &nbsp;<a id="00100020" href="#">患者历史检查</a>
        &nbsp;<a id="status" target="ppstatus" href="cgi-bin/getindex.exe?status=html">设备状态</a>
        &nbsp;<a id="license" target="ppstatus" href="cgi-bin/getindex.exe?charge=query">可刻录光盘数</a>
        &nbsp;<form style="display:inline" target="_blank" method="get" action="index.htm"><input type="hidden" name="mode" value="00100020" /><input type="text" size="8" name="patientID" /><input type="submit" value="患者ID"/></form>
	</div>
	<div id="containerBody"></div>
</div>
<div id="console" class="ui-state-error"></div>
<!-- applet id="socketProxy" style="float:right" width="540" height="400" codebase="jars" archive="socketproxy.jar" code="com.walnut.applet.socketproxy.SocketProxy">
    <PARAM NAME="java_arguments" VALUE="-Djnlp.packEnabled=true"/>
</applet>
    <param name="jnlp_href" value="socketproxy.jnlp" -->
</body>
</html>
